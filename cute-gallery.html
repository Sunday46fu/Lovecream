<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡πÅ‡∏Å‡∏•‡πÄ‡∏•‡∏≠‡∏£‡∏µ‡πà‡∏£‡∏π‡∏õ‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡πÜ ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ üíñ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Itim&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      padding: 0;
      background: linear-gradient(to bottom, 
        #ffcce6 0%, 
        #ffccf2 50%, 
        #e6ccff 100%);
      font-family: 'Itim', cursive;
      overflow: hidden;
      height: 100vh;
      position: relative;
    }

    .header {
      text-align: center;
      padding: 20px;
      background-color: rgba(255, 255, 255, 0.7);
      border-bottom: 2px dashed #ff66b3;
      position: relative;
      z-index: 100;
    }

    h1 {
      color: #ff3385;
      margin: 0;
      font-size: 2.2rem;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    }

    .back-btn {
      position: absolute;
      top: 20px;
      left: 20px;
      background-color: #ff66b3;
      color: white;
      border: none;
      border-radius: 50px;
      padding: 10px 20px;
      font-family: 'Itim', cursive;
      font-size: 1rem;
      cursor: pointer;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
      transition: all 0.3s;
      z-index: 1000;
    }

    .back-btn:hover {
      transform: scale(1.05);
      background-color: #ff3385;
    }

    .photo {
      position: absolute;
      width: 150px;
      height: 150px;
      object-fit: cover;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      border: 3px solid white;
      transition: transform 0.3s;
      cursor: pointer;
      z-index: 10;
    }

    .photo:hover {
      transform: scale(1.1);
      z-index: 100;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    }

    .hearts {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      pointer-events: none;
      z-index: 1;
    }

    .heart {
      position: absolute;
      opacity: 0;
      animation: float 6s ease-in infinite;
    }

    @keyframes float {
      0% {
        transform: translateY(0) rotate(0deg);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 1;
      }
      100% {
        transform: translateY(-500px) rotate(360deg);
        opacity: 0;
      }
    }

    .counter {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: rgba(255, 255, 255, 0.8);
      padding: 10px 20px;
      border-radius: 50px;
      font-size: 1.2rem;
      color: #ff3385;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
      z-index: 1000;
    }
  </style>
</head>
<body>
  <button class="back-btn" onclick="window.location.href='index.html'">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
  
  <div class="header">
    <h1>üì∏ ‡∏£‡∏π‡∏õ‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡πÜ ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ üíñ</h1>
  </div>

  <div class="hearts" id="hearts"></div>
  <div id="photo-container"></div>
  <div class="counter" id="counter">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û: 0/100</div>

  <script>
    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏•‡∏≠‡∏¢
    function createHearts() {
      const heartsContainer = document.getElementById("hearts");
      const colors = ['#ff66b3', '#ff8c66', '#ffcc66', '#66ff66', '#66ccff', '#b366ff'];
      
      for (let i = 0; i < 15; i++) {
        const heart = document.createElement("div");
        heart.innerHTML = "‚ù§";
        heart.className = "heart";
        heart.style.left = Math.random() * 100 + "vw";
        heart.style.top = Math.random() * 100 + "vh";
        heart.style.fontSize = (Math.random() * 20 + 10) + "px";
        heart.style.color = colors[Math.floor(Math.random() * colors.length)];
        heart.style.animationDelay = Math.random() * 6 + "s";
        heart.style.animationDuration = (Math.random() * 4 + 4) + "s";
        heartsContainer.appendChild(heart);
      }
    }

    // ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
    class PhotoPositionManager {
      constructor() {
        this.columns = Math.floor(window.innerWidth / 180);
        this.columnHeights = new Array(this.columns).fill(0);
        this.minVerticalGap = 200; // ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏£‡∏π‡∏õ
      }

      getNextPosition(imgWidth, imgHeight) {
        // ‡∏´‡∏≤‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î (‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î)
        let minHeight = Math.min(...this.columnHeights);
        let columnIndex = this.columnHeights.indexOf(minHeight);
        
        // ‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ
        if (Math.random() > 0.7) {
          columnIndex = Math.floor(Math.random() * this.columns);
        }
        
        // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á x
        const columnWidth = window.innerWidth / this.columns;
        const x = columnIndex * columnWidth + (columnWidth - imgWidth) / 2;
        
        // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á y ‡πÇ‡∏î‡∏¢‡∏Ñ‡∏≥‡∏ô‡∏∂‡∏á‡∏ñ‡∏∂‡∏á‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥
        const y = Math.max(this.columnHeights[columnIndex], -imgHeight - this.minVerticalGap);
        
        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå
        this.columnHeights[columnIndex] = y - imgHeight - this.minVerticalGap;
        
        // ‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢
        const extraGap = Math.random() * 100;
        this.columnHeights[columnIndex] -= extraGap;
        
        return { x, y };
      }

      updateColumns() {
        this.columns = Math.max(3, Math.floor(window.innerWidth / 180));
        this.columnHeights = new Array(this.columns).fill(0);
      }
    }


    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
    function createPhotos() {
      const container = document.getElementById("photo-container");
      const counter = document.getElementById("counter");
      let loadedCount = 0;
      const positionManager = new PhotoPositionManager();
      const activePhotos = [];

      // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö
      function updateCounter() {
        loadedCount++;
        counter.textContent = `‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û: ${loadedCount}/100`;
        if (loadedCount === 100) {
          counter.style.backgroundColor = "#a0ffa0";
        }
      }

      // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ä‡∏ô‡∏Å‡∏±‡∏ô
      function isOverlapping(newPhoto, otherPhotos) {
        const margin = 20; // ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏£‡∏π‡∏õ
        const newRect = {
          left: newPhoto.x - margin,
          right: newPhoto.x + newPhoto.width + margin,
          top: newPhoto.y - margin,
          bottom: newPhoto.y + newPhoto.height + margin
        };

        for (const photo of otherPhotos) {
          const photoRect = {
            left: photo.x - margin,
            right: photo.x + photo.width + margin,
            top: photo.y - margin,
            bottom: photo.y + photo.height + margin
          };

          if (newRect.left < photoRect.right && 
              newRect.right > photoRect.left && 
              newRect.top < photoRect.bottom && 
              newRect.bottom > photoRect.top) {
            return true;
          }
        }
        return false;
      }

      // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û 100 ‡∏£‡∏π‡∏õ
      for (let i = 1; i <= 100; i++) {
        setTimeout(() => {
          const img = new Image();
          img.className = "photo";
          img.src = `images/photo${i}.jpg`; // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô path ‡∏Ç‡∏≠‡∏á‡∏£‡∏π‡∏õ‡∏Ñ‡∏∏‡∏ì
          
          // ‡∏´‡∏≤‡∏Å‡∏£‡∏π‡∏õ‡πÑ‡∏°‡πà‡∏û‡∏ö ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏£‡∏π‡∏õ placeholder
          img.onerror = function() {
            this.src = 'https://placekitten.com/200/200?image=' + i;
            this.onerror = null;
            updateCounter();
          };
          
          img.onload = function() {
            updateCounter();
            
            // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏£‡∏π‡∏õ (‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢)
            const size = Math.random() * 30 + 130;
            img.style.width = `${size}px`;
            img.style.height = `${size}px`;
            
            // ‡∏´‡∏≤‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≠‡∏ô‡∏Å‡∏±‡∏ö‡∏£‡∏π‡∏õ‡∏≠‡∏∑‡πà‡∏ô
            let position;
            let attempts = 0;
            const maxAttempts = 10;
            
            do {
              position = positionManager.getNextPosition(size, size);
              attempts++;
              
              if (attempts >= maxAttempts) {
                // ‡∏ñ‡πâ‡∏≤‡∏´‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≠‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡πÉ‡∏´‡πâ‡∏¢‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏ã‡πâ‡∏≠‡∏ô‡∏ö‡πâ‡∏≤‡∏á‡πÅ‡∏ï‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á
                position.y -= 100 + attempts * 20;
                break;
              }
            } while (isOverlapping(
              { x: position.x, y: position.y, width: size, height: size },
              activePhotos
            ));
            
            // ‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô (‡∏™‡∏∏‡πà‡∏°)
            const rotation = Math.random() * 20 - 10;
            img.style.transform = `rotate(${rotation}deg)`;
            
            img.style.left = `${position.x}px`;
            img.style.top = `${position.y}px`;
            
            container.appendChild(img);
            
            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏π‡∏õ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏¢‡∏π‡πà
            activePhotos.push({
              x: position.x,
              y: position.y,
              width: size,
              height: size,
              element: img
            });
            
            // ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏£‡∏π‡∏õ‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß
            animatePhoto(img, size, activePhotos);
          };
        }, i * 300); // ‡πÄ‡∏ß‡πâ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏π‡∏õ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡∏π‡∏õ
      }
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
    function animatePhoto(img, size, activePhotos) {
      let posY = parseFloat(img.style.top);
      const posX = parseFloat(img.style.left);
      const rotation = parseFloat(img.style.transform.replace('rotate(', '').replace('deg)', '')) || 0;
      const rotationSpeed = (Math.random() - 0.5) * 0.2;
      const speed = Math.random() * 0.5 + 0.8; // ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏•‡∏î‡∏•‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ
      
      function move() {
        posY += speed;
        const currentRotation = rotation + rotationSpeed;
        
        img.style.top = `${posY}px`;
        img.style.transform = `rotate(${currentRotation}deg)`;
        
        // ‡∏ñ‡πâ‡∏≤‡∏£‡∏π‡∏õ‡πÄ‡∏•‡∏¢‡∏•‡πà‡∏≤‡∏á‡∏à‡∏≠ ‡πÉ‡∏´‡πâ‡∏¢‡πâ‡∏≤‡∏¢‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÉ‡∏´‡∏°‡πà
        if (posY > window.innerHeight + 50) {
          posY = -size - Math.random() * 100;
          img.style.top = `${posY}px`;
          
          // ‡∏´‡∏≤‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á x ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≠‡∏ô‡∏Å‡∏±‡∏ö‡∏£‡∏π‡∏õ‡∏≠‡∏∑‡πà‡∏ô
          let newX;
          let attempts = 0;
          const maxAttempts = 10;
          
          do {
            newX = Math.random() * (window.innerWidth - size);
            attempts++;
            
            if (attempts >= maxAttempts) {
              break; // ‡∏ñ‡πâ‡∏≤‡∏´‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≠‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡πÉ‡∏´‡πâ‡∏¢‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏ã‡πâ‡∏≠‡∏ô‡∏ö‡πâ‡∏≤‡∏á
            }
          } while (isOverlapping(
            { x: newX, y: posY, width: size, height: size },
            activePhotos.filter(p => p.element !== img)
          ));
          
          img.style.left = `${newX}px`;
          
          // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÉ‡∏ô activePhotos
          const photoIndex = activePhotos.findIndex(p => p.element === img);
          if (photoIndex !== -1) {
            activePhotos[photoIndex].x = newX;
            activePhotos[photoIndex].y = posY;
          }
        }
        
        requestAnimationFrame(move);
      }
      
      // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ä‡∏ô‡∏Å‡∏±‡∏ô
      function isOverlapping(newPhoto, otherPhotos) {
        const margin = 20; // ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏£‡∏π‡∏õ
        const newRect = {
          left: newPhoto.x - margin,
          right: newPhoto.x + newPhoto.width + margin,
          top: newPhoto.y - margin,
          bottom: newPhoto.y + newPhoto.height + margin
        };

        for (const photo of otherPhotos) {
          const photoRect = {
            left: photo.x - margin,
            right: photo.x + photo.width + margin,
            top: photo.y - margin,
            bottom: photo.y + photo.height + margin
          };

          if (newRect.left < photoRect.right && 
              newRect.right > photoRect.left && 
              newRect.top < photoRect.bottom && 
              newRect.bottom > photoRect.top) {
            return true;
          }
        }
        return false;
      }
      
      move();
    }

    // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
    window.onload = function() {
      createHearts();
      createPhotos();
      
      // ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏ñ‡∏π‡∏Å resize
      const positionManager = new PhotoPositionManager();
      window.addEventListener('resize', function() {
        positionManager.updateColumns();
      });
    };
  </script>
  <audio id="bg-music" autoplay loop preload="auto" src="12121.mp3"></audio>

  <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÄ‡∏û‡∏•‡∏á -->
  <button id="music-toggle" aria-label="Toggle Music">
    üîä
  </button>

  <style>
    #music-toggle {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background-color: #ff66b3;
      color: white;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease;
      z-index: 1000;
    }

    #music-toggle:hover {
      background-color: #ff3385;
      transform: scale(1.1);
    }
  </style>

  <script>
    const music = document.getElementById('bg-music');
    const toggleBtn = document.getElementById('music-toggle');

    window.addEventListener('DOMContentLoaded', () => {
      const playPromise = music.play();
      if (playPromise !== undefined) {
        playPromise.catch(err => {
          console.warn("Autoplay ‡∏ñ‡∏π‡∏Å‡∏õ‡∏¥‡∏î‡πÑ‡∏ß‡πâ ‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏≠‡∏á");
        });
      }
    });

    toggleBtn.addEventListener('click', () => {
      if (music.paused) {
        music.play();
        toggleBtn.textContent = 'üîä';
      } else {
        music.pause();
        toggleBtn.textContent = 'üîá';
      }
    });
  </script>
</body>
</html>
